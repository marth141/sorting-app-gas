<script type="text/babel">
  class Sorter extends React.Component {
    constructor() {
      super();
      this.state = {
        originalSortList: "",
        finalSortList: "",
        comparisonLeft: "",
        comparisonRight: "",
        indexLeft: 0,
        indexRight: 1
      };
      this.setOriginalSortList = this.setOriginalSortList.bind(this);
    }

    componentDidMount() {
      google.script.run
        .withSuccessHandler(this.setOriginalSortList)
        .getOriginalPriorityList();
    }

    componentDidUpdate() {
      console.log("=== State Update ===");
      console.log(this.state);
    }

    setOriginalSortList(value) {
      this.setState({
        originalSortList: value,
        comparisonLeft: value[this.state.indexLeft],
        comparisonRight: value[this.state.indexRight]
      });
    }

    render() {
      return (
        <div>
          <OriginalList list={this.state.originalSortList} />
          <ComparisonLeft leftValue={this.state.comparisonLeft} />
          <ComparisonRight rightValue={this.state.comparisonRight} />
          <SortedList list={this.state.finalSortList} />
          <Question comparisons={ {
            left: this.state.comparisonLeft,
            right: this.state.comparisonRight
          } } />
        </div>
      );
    }
  }
</script>
